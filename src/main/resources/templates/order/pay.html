<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Payment</title>
</head>
<body>
<h2>Payment for Order</h2>

<p>Order ID: <span th:text="${order.id}"></span></p>

<form th:action="@{/order/pay/{orderId}(orderId=${order.id})}" method="post">
    <label for="method">Select Payment Method:</label>
    <select name="method" id="method" required>
        <option th:each="entry : ${paymentMethods}"
                th:value="${entry.key}"
                th:text="${entry.value}">
        </option>
    </select>

    <div id="voucherFields" style="display:none;">
        <label for="voucherCode">Voucher Code:</label>
        <input type="text" id="voucherCode" name="voucherCode" placeholder="Enter voucher code">
    </div>

    <div id="codFields" style="display:none;">
        <label for="address">Delivery Address:</label>
        <input type="text" id="address" name="address" placeholder="Enter delivery address">
        <label for="deliveryFee">Delivery Fee:</label>
        <input type="number" id="deliveryFee" name="deliveryFee" placeholder="Enter delivery fee">
    </div>

    <button type="submit">Pay</button>
</form>

<script>
    document.getElementById("method").addEventListener("change", function() {
        let method = this.value;
        document.getElementById("voucherFields").style.display = method === "VOUCHER" ? "block" : "none";
        document.getElementById("codFields").style.display = method === "COD" ? "block" : "none";
    });
</script>
</body>
</html>
